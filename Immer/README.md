# Immerë¥¼ ë¶„ì„í•´ë³´ìğŸ¯

## ì°¸ê³  ìë£Œ

- [Immer ê³µì‹ ìë£Œ](https://immerjs.github.io/immer/)
- [Immerì˜ ì›ë¦¬ ë¶„ì„](https://ui.toast.com/weekly-pick/ko_20220217?ref=codenary)
- [Immerì˜ ì›ë¦¬ ë¶„ì„ - Proxy](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Proxy)
- [Zustandì—ì„œ Immer ì‚¬ìš©í•˜ëŠ” ë°©ë²•](https://www.heropy.dev/p/n74Tgc)

## Reactì˜ ë¶ˆë³€ì„± ìœ ì§€

### ë¶ˆë³€ì„± ìœ ì§€í•´ì•¼ í•˜ëŠ” ì´ìœ ìœ 

ReactëŠ” Propsë‚˜ Stateê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ ë¦¬ë Œë”ë§ì´ ë°œìƒí•œë‹¤. ì´ Propsì™€ Stateì˜ ë³€ê²½ì„ ë¶ˆë³€ì„±ì„ ì´ìš©í•´ ê°ì§€í•˜ê²Œ ëœë‹¤.

(ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ë³µì‚¬í•˜ëŠ” ì„±ì§ˆì„ ì´ìš©í•´ ì–•ì€ ë¹„êµë¥¼ ì´ìš©í•´ ë³€ê²½ ë°œìƒ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤)

ê·¸ë ‡ê¸°ì— Reactì—ì„œ ëª¨ë“  ìš”ì†ŒëŠ” ë¶ˆë³€ì„±ì„ ì§€ë‹ˆê³  ìˆì–´ì•¼ í•œë‹¤. íŠ¹ì • ì‹œì ì˜ UIë¥¼ ë‚˜íƒ€ë‚´ë©°, UIë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì€ ìƒˆ ìš”ì†Œë¥¼ ë§Œë“¤ì–´ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¡´ì¬í•œë‹¤.

StateëŠ” ì§ì ‘ ìˆ˜ì •ë˜ì–´ì„œëŠ” ì•ˆë˜ê³ , ìƒˆë¡œìš´ ìš”ì†Œë¡œ ì—…ë°ì´íŠ¸ë˜ì–´ì•¼ í•œë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê°ì²´ì¸ ê²½ìš° ë©”ëª¨ë¦¬ í™ ì˜ì—­ì— ì €ì¥ì´ ë˜ì–´, ë‚´ë¶€ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•˜ë©´ ë™ì¼í•œ ì°¸ì¡°ë¥¼ ê°€ì§€ê³  ìˆê¸°ì— ë³€ê²½ë˜ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì¸ì§€í•˜ì§€ ëª»í•´ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

### ë¶ˆë³€ì„± ìœ ì§€í•˜ëŠ” ë°©ë²•

- Object.assign()
- ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì

## Immerë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ 

ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ê²Œ ë  ë•Œ, ë³µì¡í•œ í˜•íƒœì˜ ê°ì²´ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.

ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì˜®ê¸°ëŠ” ê³¼ì •ì—ì„œ ì§ì ‘ êµ¬í˜„í•œ í˜•íƒœê°€ ë‹¨ìˆœ ê°ì²´ë¡œ ë³€í•˜ëŠ” ë“± ì„±ëŠ¥ìƒì˜ ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

ImmerëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ê°œì„ í•˜ë©° ë¶ˆë³€ì„±ì„ ì‰½ê²Œ ìœ ì§€í•˜ë„ë¡ ë•ëŠ”ë‹¤. ë³€ê²½í•  ë¶€ë¶„ì˜ ì½”ë“œë§Œ ì‘ì„±í•˜ì—¬ ì½”ë“œê°€ ê°„ê²°í•´ì§€ê²Œ ëœë‹¤.

## Immerì˜ í˜•íƒœ

- ìˆ˜ì •í•  ìƒíƒœ, ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ê°€ ì¡´ì¬í•˜ëŠ” ë²„ì „

```js
const nextState = produce(baseState, (draft) => {
  draft.push({ title: "Tweet about it" });
});
```

- ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜, íŒŒë¼ë¯¸í„°ê°€ ì¡´ì¬í•˜ëŠ” ë²„ì „

```js
const toggleTodo = produce((draft, id) => {
  const todo = draft.find((todo) => todo.id === id);
  todo.done = !todo.done;
});

const baseState = [ ... ];

const nextState = toggleTodo(baseState, 'Immer');
```

## Immerì˜ ì›ë¦¬

í”„ë¡ì‹œ(Proxy) ê°ì²´ë¥¼ ì´ìš©í•´ ì›ë³¸ ê°ì²´ ëŒ€ì‹  í”„ë¡ì‹œ ê°ì²´ë¥¼ ë³µì‚¬í•˜ê³  ë³€ê²½í•˜ì—¬ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.

### Proxy ê°ì²´

ì›ë³¸ ê°ì²´ë¥¼ ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì§€ë§Œ, ê°ì²´ì˜ ì†ì„± ë˜ëŠ” ì„¤ì • ë˜ëŠ” ì •ì˜ì™€ ê°™ì€ ë¶€ë¶„ì„ ì¬ì •ì˜í•  ìˆ˜ ìˆë‹¤.

- target: ì›ë³¸ ê°ì²´
- handler: ì›ë³¸ ê°ì²´ë¥¼ ê°€ì ¸ì™€ ì¬ì •ì˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°ì²´

```js
const proxy1 = new Proxy(target, handler);
```

### Immer ê³¼ì •

1. Proxyë¥¼ ì‚¬ìš©í•´ ìˆ˜ì • ê°€ëŠ¥í•œ ì´ˆì•ˆ ê°ì²´ ìƒì„±
   - ê°’ì„ ì½ì„ ë•Œ, `get íŠ¸ë©` í˜¸ì¶œ
   - ê°’ ë³€ê²½í•  ë•Œ, `set íŠ¸ë©` í˜¸ì¶œ
2. Proxyë¥¼ í†µí•´ ìƒì„±ëœ ì´ˆì•ˆ ê°ì²´ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬(recipe í•¨ìˆ˜)
3. ìˆ˜ì •ëœ ë¶€ë¶„ì„ ê¸°ì¤€ìœ¼ë¡œ ì›ë³¸ ê°ì²´ ë³µì‚¬ë³¸ ìƒì„±
   - ì›ë³¸ ê°ì²´ë¥¼ ìˆ˜ì • X
   - í•­ìƒ ë³µì‚¬ë³¸ì„ ìƒì„± O

## Reactì—ì„œ Immer ì‚¬ìš©í•˜ëŠ” ë°©ë²•

- [useStateì— produce ì‚¬ìš©](https://github.com/minjeongss/React-Ts-Practice/tree/main/Immer/src/components/UseStateVersion.tsx)
- [useState ëŒ€ì‹  useImmer ì‚¬ìš©](https://github.com/minjeongss/React-Ts-Practice/tree/main/Immer/src/components/UseImmerVersion.tsx)
- zustandì— immer ì‚¬ìš©
  - [ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì ì‚¬ìš© zustand](https://github.com/minjeongss/React-Ts-Practice/tree/main/Immer/src/store/originUserStore.ts)
  - [Immer ì‚¬ìš© zustand](https://github.com/minjeongss/React-Ts-Practice/tree/main/Immer/src/store/immerUserStore.ts)
